import subprocess
import time
import os


def get_audio_mic() -> str:
    """–ü–æ–ª—É—á–∞–µ–º –∞—É–¥–∏–æ —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞"""

    # ===== –ù–ê–°–¢–†–û–ô–ö–ò =====
    filename = "moy_golos.wav"  # –∏–º—è —Ñ–∞–π–ª–∞
    seconds = 10                 # —Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å

    print(f"üé§ –ó–∞–ø–∏—Å—å {seconds} —Å–µ–∫—É–Ω–¥...")
    print("–ì–æ–≤–æ—Ä–∏ —á—Ç–æ —Ö–æ—á–µ—à—å")
    print("-" * 30)

    # –ó–∞–ø—É—Å–∫–∞–µ–º –∑–∞–ø–∏—Å—å –Ω–∞ 10 —Å–µ–∫—É–Ω–¥
    process = subprocess.Popen([
        "arecord",
        "-D", "hw:0,0",      # —Ç–≤–æ–π –º–∏–∫—Ä–æ—Ñ–æ–Ω
        "-f", "S16_LE",       # 16 –±–∏—Ç
        "-r", "16000",        # —á–∞—Å—Ç–æ—Ç–∞
        "-c", "1",            # –º–æ–Ω–æ
        "-d", str(seconds),   # –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å 10 —Å–µ–∫—É–Ω–¥!
        filename
    ])

    # –ñ–¥—ë–º –ø–æ–∫–∞ –∑–∞–ø–∏—Å—å –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è
    process.wait()

    print("\n‚úÖ –ó–∞–ø–∏—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
    if os.path.exists(filename):
        size = os.path.getsize(filename) / 1024
        print(f"üìÅ –§–∞–π–ª: {filename}")
        print(f"üìä –†–∞–∑–º–µ—Ä: {size:.1f} –ö–ë")
        return filename